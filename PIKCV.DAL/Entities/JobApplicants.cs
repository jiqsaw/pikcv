
// Generated by MyGeneration Version # (1.3.0.0)

using System;
using System.Data;
using System.Data.SqlClient;

namespace PIKCV.DAL
{
	public class JobApplicants : _JobApplicants
	{
        //Mesajlarý Getir 
        public DataTable GetUserJobApplicants(int UserID, int LanguageID, string CompanyID, string PositionID, string ApplicationStatusID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetUserJobApplicants", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@UserID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = UserID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@LanguageID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = LanguageID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@CompanyID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = CompanyID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@PositionID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = PositionID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@ApplicationStatusID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = ApplicationStatusID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Kullanýcýnýn Baþvuru Sayýsýný Getirir
        public DataTable GetUserApplicantCount(int UserID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetUserJobApplicantsCount", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@UserID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = UserID;
            cmd.Parameters.Add(param);

            //param = new SqlParameter("@MessageOwnerTypeCode", SqlDbType.Int, 4);
            //param.Direction = ParameterDirection.Input;
            //param.Value = MessageOwnerTypeCode;
            //cmd.Parameters.Add(param);

            //param = new SqlParameter("@IsRead", SqlDbType.Bit);
            //param.Direction = ParameterDirection.Input;
            //param.Value = IsRead;
            //cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Bir iþe baþvuran adaylarý getirir 
        public DataTable GetJobApplicantsSorted(string JobIDs)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetJobApplicantsSorted", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@InputJobIDs", SqlDbType.Xml);
            param.Direction = ParameterDirection.Input;
            param.Value = JobIDs;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Þirket Ýlanýnýn Baþvuru Detaylarýný Getir 
        public DataTable GetCompanyJobApplicants(int JobID, int LanguageID, string ApplicationStatusID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetCompanyJobApplicants", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@JobID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = JobID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@LanguageID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = LanguageID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@ApplicationStatusID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = ApplicationStatusID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }
	}
}
