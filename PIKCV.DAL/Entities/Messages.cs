
// Generated by MyGeneration Version # (1.3.0.0)

using System;
using System.Data;
using System.Data.SqlClient;

namespace PIKCV.DAL
{
	public class Messages : _Messages
	{
        //Mesajlarý Getir 
        public DataTable LoadAllMessages(int UserID, bool IsDeleted, int MessageOwnerTypeCode, string CompanyID, string JobID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetMessagesAll", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@UserID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = UserID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@IsDeleted", SqlDbType.Bit, 1);
            param.Direction = ParameterDirection.Input;
            param.Value = IsDeleted;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@MessageOwnerTypeCode", SqlDbType.Int);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageOwnerTypeCode;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@CompanyID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = CompanyID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@JobID", SqlDbType.VarChar, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = JobID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Tek Bir Mesajýn Detayýný Getir 
        public DataTable LoadMessageByMessageID(int MessageID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetMessageByMessageID", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@MessageID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Firmanýn Bir Mesajýn Detayýný Getir 
        public DataTable GetCompanyMessageByID(int MessageID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetCompanyMessageByMessageID", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@MessageID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }


        //Firmanýn Gönderilern Mesaj Detayýný Getir 
        public DataTable GetCompanySendMessageDetail(int MessageID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetCompanySendMessageDetail", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@MessageID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Tek Bir Mesajýn Detayýný Getir 
        public DataTable GetCompanyMessages(int CompanyID, bool IsDeleted, int MessageOwnerTypeCode)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetCompanyMessages", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@CompanyID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = CompanyID;
            cmd.Parameters.Add(param);


            param = new SqlParameter("@IsDeleted", SqlDbType.Bit, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = IsDeleted;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@MessageOwnerTypeCode", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageOwnerTypeCode;
            cmd.Parameters.Add(param);
            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Firmanýn gönderilen mesajlarýný getir
        public DataTable GetCompanySentMessages(int CompanyID, bool IsDeleted, string UserID)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetCompanySentMessages", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@CompanyID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = CompanyID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@IsDeleted", SqlDbType.Bit, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = IsDeleted;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@UserID", SqlDbType.NVarChar, 150);
            param.Direction = ParameterDirection.Input;
            param.Value = UserID;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }

        //Kullanýcýnýn Mesaj Sayýsýný Getirir
        public DataTable GetUserMessageCount(int UserID, int MessageOwnerTypeCode, bool IsRead)
        {
            SqlConnection conn = DBHelper.getConnection();
            SqlCommand cmd = DBHelper.getSprocCmd("_GetUserMessageCount", conn);
            SqlDataAdapter da;
            SqlParameter param;
            DataTable dt = new DataTable();

            param = new SqlParameter("@UserID", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = UserID;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@MessageOwnerTypeCode", SqlDbType.Int, 4);
            param.Direction = ParameterDirection.Input;
            param.Value = MessageOwnerTypeCode;
            cmd.Parameters.Add(param);

            param = new SqlParameter("@IsRead", SqlDbType.Bit);
            param.Direction = ParameterDirection.Input;
            param.Value = IsRead;
            cmd.Parameters.Add(param);

            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            return dt;
        }
	}
}
